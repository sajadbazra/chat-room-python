# chat-room-python
star project chat room in pyton 
<p align="center">
<a href="https://www.python.org" target="_blank"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg" alt="python" width="40" height="40"/> </a>
<a href="https://www.sqlite.org/" target="_blank"> <img src="https://www.vectorlogo.zone/logos/sqlite/sqlite-icon.svg" alt="sqlite" width="40" height="40"/> </a>
</p>
#  پروژه چت سرور – کلاینت با پایتون

## ۱. مقدمه
 این یک پروژه درسی هست که میخوایم اروز باهم تست کنیم و بریم جلو و چندتا مفاهیم جدید یادبگیریم.  
یک نکته جدید درمورد پایتون که یک چت روم ساده بسازی و هرکاربر با اسم خود وارد بشه و چیام بگذارد.  
 چت‌اپلیکیشن‌ها دقیقاً همین هدف را دنبال می‌کنند.  

این پروژه‌ی ساده‌ی **چت سرور – کلاینت با پایتون** برای نمایش عملی نحوه ایجاد یک سیستم پیام‌رسان طراحی شده است.  

###  اهداف پروژه:
- نشان دادن چگونگی ایجاد یک سرور مرکزی که چندین کاربر را مدیریت کند  
- اتصال چندین کلاینت به سرور و ارسال/دریافت پیام‌ها  
- داشتن رابط کاربری گرافیکی (GUI) ساده برای کاربران  
- بررسی اصول چندنخی (Multi-threading)  
- تمرین اصول برنامه‌نویسی امن و مدیریت خطا  



## ۲. مرور کلی پروژه
این پروژه از دو بخش اصلی تشکیل شده است:  

###  سرور (Server)
- مدیریت کاربران و اتصالات  
- دریافت پیام‌ها و پخش آن‌ها  
- پشتیبانی از چند اتصال همزمان با Threading  

###  کلاینت (Client)
- نام‌کاربری انتخاب می‌کند و وارد سیستم می‌شود  
- پیام عمومی یا خصوصی ارسال می‌کند  
- رابط گرافیکی ساده با **Tkinter**  

###  نحوه ارتباط
- کلاینت با **TCP Socket** به سرور وصل می‌شود  
- پیام ثبت‌نام (`register`) می‌فرستد  
- پیام‌های عمومی برای همه و پیام خصوصی فقط برای گیرنده ارسال می‌شوند  
- لیست کاربران همیشه به‌روز می‌شود  



## ۳. کتابخانه‌های استفاده‌شده
- **socket** → ایجاد ارتباط شبکه‌ای (TCP)  
- **threading** → چندریسمانی برای مدیریت چند کاربر  
- **tkinter** → ساخت رابط گرافیکی (GUI)  
- **json** → تبادل داده ساختاریافته بین کلاینت و سرور  
- **queue** → مدیریت صف پیام‌ها در کلاینت  
- **argparse** → گرفتن ورودی خط فرمان در سرور  
- **time** → درج زمان و مدیریت تأخیرها  



## ۴. ساختار سرور
- ایجاد سوکت (`socket.socket`)  
- Bind به آدرس و پورت  
- Accept اتصال‌ها در یک حلقه بی‌نهایت  
- ساخت یک Thread برای هر کاربر  
- مدیریت کاربران در یک دیکشنری `clients = {}`  
- ارسال پیام‌ها به‌صورت عمومی یا خصوصی  
- مدیریت خطاها و حذف کاربرانی که ناگهان قطع می‌شوند  



## ۵. ساختار کلاینت
- ثبت‌نام با ارسال پیام `{"type": "register", "user_id": "Ali"}`  
- ارسال پیام عمومی (`chat`)  
- ارسال پیام خصوصی (`pm`)  
- دریافت پیام‌ها با Thread جداگانه  
- مدیریت پیام‌ها با `queue`  
- درخواست لیست کاربران (`list`)  



## ۶. رابط کاربری (GUI)
با **Tkinter** ساخته شده و شامل:  
- پنجره ورود → نام کاربری و دکمه ورود  
- پنجره اصلی → نمایش پیام‌ها، ورودی پیام جدید  
- طراحی ساده ولی قابل توسعه (رنگ‌بندی، استایل و …)  



## ۷. ویژگی‌های امنیتی
- استفاده از Lock برای جلوگیری از تداخل  
- جلوگیری از نام کاربری تکراری  
- مدیریت استثناها برای جلوگیری از کرش  
- حذف خودکار کاربران قطع‌شده  



## ۸. ذخیره تاریخچه پیام‌ها
- امکان ذخیره پیام‌ها در فایل متنی یا دیتابیس  
- در این نسخه فقط نمایش داده می‌شوند  



###  قابلیت‌های توسعه:
- ارسال فایل  
- احراز هویت با رمز عبور  
- رمزنگاری پیام‌ها  
- رابط کاربری پیشرفته‌تر  
- ذخیره تاریخچه کامل گفتگوها  

---

##  اجرا

برای اجرای پروژه مراحل زیر را انجام دهید:

1. ابتدا سرور را اجرا کنید.  
   یک ترمینال باز کرده و دستور زیر را بزنید:

   ```bash
   python server.py

2. سپس کلانت را اجرا کرده.  

   ```bash
   python client.py


## ایمپورت‌ها

   ```bash
   import argparse
    
- برای پارس‌کردن آرگومان‌های خط فرمان (--host, --port, --cert, --key).

    ```bash
   import json

- برای سریال‌سازی/دسریال‌سازی پیام‌ها به/از JSON (پروتکل انتقال ما).

    ```bash
   import re

- برای اعتبارسنجی user_id با الگوی Regex.

    ```bash
   import socket

- برای ساخت سوکت TCP (پایه‌ی ارتباط شبکه‌ای).

    ```bash
   import ssl

- برای TLS اختیاری (رمزنگاری نشست TCP).

    ```bash
   import threading

- برای اجرا/همزمانی: نخ پذیرش و نخ رسیدگی به هر کلاینت.

    ```bash
   import time

- برای ثبت timestamp پیام‌ها، و حلقه‌ی اصلی.

    ```bash
   from typing import Dict, Tuple, Optional

- تایپ‌هینت‌ها برای خوانایی و ایمنی بیشتر درکد.

## تست پروژه
<p align="center">
<img src="https://user-images.githubusercontent.com/29748439/135331788-ad66606a-ac33-4196-b482-aed932431937.gif" alt="database schema" width="720"/>
</p>

